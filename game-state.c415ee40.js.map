{"version":3,"sources":["game-state.js"],"names":["play","move","stop","prevState","lastTimeChangeToStop","Date","now","window","gameStateInit","gameState","gameStateMove","gameStateStop","gameStateIsInMove","timeDiff","strechesInSession","gameScore","totalStrechCount","updatePlayerStats","player","set","save","document","getElementById","innerHTML"],"mappings":";;;;;;AAAA,IAAMA,IAAI,GAAG,MAAb;AACA,IAAMC,IAAI,GAAG,MAAb;AACA,IAAMC,IAAI,GAAG,MAAb;AAEA,IAAIC,SAAS,GAAGD,IAAhB;AACA,IAAIE,oBAAoB,GAAGC,IAAI,CAACC,GAAL,EAA3B;;AAEAC,MAAM,CAACC,aAAP,GAAuB,YAAM;AACzBD,EAAAA,MAAM,CAACE,SAAP,GAAmBP,IAAnB;AACH,CAFD;;AAIAK,MAAM,CAACG,aAAP,GAAuB,YAAM;AACzBP,EAAAA,SAAS,GAAGI,MAAM,CAACE,SAAnB;AACAF,EAAAA,MAAM,CAACE,SAAP,GAAmBR,IAAnB;AACH,CAHD;;AAKAM,MAAM,CAACI,aAAP,GAAuB,YAAM;AACzBR,EAAAA,SAAS,GAAGI,MAAM,CAACE,SAAnB;;AACA,MAAIN,SAAS,IAAIF,IAAjB,EAAuB;AACnBG,IAAAA,oBAAoB,GAAGC,IAAI,CAACC,GAAL,EAAvB;AACH;;AACDC,EAAAA,MAAM,CAACE,SAAP,GAAmBP,IAAnB;AACH,CAND;;AAQAK,MAAM,CAACK,iBAAP,GAA2B,YAAM;AAC7B,MAAIT,SAAS,IAAID,IAAb,IAAqBK,MAAM,CAACE,SAAP,IAAoBR,IAA7C,EAAmD;AAC/C,QAAMK,GAAG,GAAGD,IAAI,CAACC,GAAL,EAAZ;AACA,QAAMO,QAAQ,GAAG,CAACP,GAAG,GAAGF,oBAAP,IAA+B,IAAhD,CAF+C,CAG/C;AACA;;AACA,QAAIG,MAAM,CAACO,iBAAP,IAA4B,CAAhC,EAAmC;AAC/BP,MAAAA,MAAM,CAACO,iBAAP,GAA2BP,MAAM,CAACO,iBAAP,GAA2B,CAAtD;AACH,KAFD,MAEO,IAAID,QAAQ,IAAI,GAAhB,EAAqB;AACxBN,MAAAA,MAAM,CAACO,iBAAP,GAA2BP,MAAM,CAACO,iBAAP,GAA2B,CAAtD;AACH;AACJ;;AACD,SAAOP,MAAM,CAACE,SAAP,IAAoBR,IAA3B;AACH,CAbD;;AAeAM,MAAM,CAACC,aAAP;AAEAD,MAAM,CAACQ,SAAP,GAAmB,CAAnB;AACAR,MAAM,CAACO,iBAAP,GAA2B,CAA3B;AACAP,MAAM,CAACS,gBAAP,GAA0B,CAA1B;;AAEe,SAASC,iBAAT,GAA6B;AACxCV,EAAAA,MAAM,CAACQ,SAAP,IAAoB,CAApB;AACAR,EAAAA,MAAM,CAACS,gBAAP,IAA2BT,MAAM,CAACO,iBAAlC;;AACA,MAAIP,MAAM,CAACW,MAAP,IAAiBX,MAAM,CAACW,MAAP,CAAcC,GAAnC,EAAwC;AACpCZ,IAAAA,MAAM,CAACW,MAAP,CAAcC,GAAd,CAAkB,OAAlB,EAA2BZ,MAAM,CAACQ,SAAlC;AACAR,IAAAA,MAAM,CAACW,MAAP,CAAcC,GAAd,CAAkB,oBAAlB,EAAwCZ,MAAM,CAACS,gBAA/C;AACAT,IAAAA,MAAM,CAACW,MAAP,CAAcE,IAAd;AACH;;AACDC,EAAAA,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,SAAtC,GAAkDhB,MAAM,CAACQ,SAAzD;AACAM,EAAAA,QAAQ,CAACC,cAAT,CAAwB,yBAAxB,EAAmDC,SAAnD,GAA+DhB,MAAM,CAACO,iBAAtE;AACAO,EAAAA,QAAQ,CAACC,cAAT,CAAwB,oBAAxB,EAA8CC,SAA9C,GAA0DhB,MAAM,CAACS,gBAAjE;AACH","file":"game-state.c415ee40.js","sourceRoot":"../src","sourcesContent":["const play = \"play\"\nconst move = \"move\"\nconst stop = \"stop\"\n\nlet prevState = stop\nlet lastTimeChangeToStop = Date.now()\n\nwindow.gameStateInit = () => {\n    window.gameState = stop\n}\n\nwindow.gameStateMove = () => {\n    prevState = window.gameState\n    window.gameState = move\n}\n\nwindow.gameStateStop = () => {\n    prevState = window.gameState\n    if (prevState == move) {\n        lastTimeChangeToStop = Date.now()\n    }\n    window.gameState = stop\n}\n\nwindow.gameStateIsInMove = () => {\n    if (prevState == stop && window.gameState == move) {\n        const now = Date.now()\n        const timeDiff = (now - lastTimeChangeToStop) / 1000\n        // if first time just increment\n        // otherwise do not increment if it was flickering\n        if (window.strechesInSession == 0) {\n            window.strechesInSession = window.strechesInSession + 1\n        } else if (timeDiff >= 0.5) {\n            window.strechesInSession = window.strechesInSession + 1\n        }\n    }\n    return window.gameState == move\n}\n\nwindow.gameStateInit()\n\nwindow.gameScore = 0\nwindow.strechesInSession = 0\nwindow.totalStrechCount = 0\n\nexport default function updatePlayerStats() {\n    window.gameScore += 1\n    window.totalStrechCount += window.strechesInSession\n    if (window.player && window.player.set) {\n        window.player.set('score', window.gameScore)\n        window.player.set('total_strech_count', window.totalStrechCount)\n        window.player.save()\n    }\n    document.getElementById('user-score').innerHTML = window.gameScore\n    document.getElementById('strech-count-in-session').innerHTML = window.strechesInSession\n    document.getElementById('total-strech-count').innerHTML = window.totalStrechCount\n}\n"]}